<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>3级联动菜单</title>
    <script>

        function clearSelect(sel) {
            for (var j = sel.options.length; j >= 0; j--) {
                sel.remove(j);
                console.log("rm");
            }
        }

        window.onload = function () {



            var arr = {
                "奥克兰大学": {
                    "文学系": ["文学系1班", "文学系2班", "文学系3班"
                    ],
                    "历史系": ["历史系1班", "历史系2班", "历史系3班"]
                },
                "梅西大学": {
                    "化学系": ["化学系1班", "化学系2班", "化学系3班"
                    ],
                    "工商系": ["工商1班", "工商2班", "工商3班"]
                },
                "林肯大学": {
                    "环境工程": ["环保1班", "环保2班", "环保3班"
                    ],
                    "艺术系": ["艺术1班", "艺术2班", "艺术3班"]
                }
            };

            var selArr = Array(3);
            for (var i = 0; i < selArr.length; i++) {
                selArr[i] = document.createElement("select");
                selArr[i].index = i;
                document.body.appendChild(selArr[i]);
            }



            for (var key in arr) {
                //update select0
                var opt = document.createElement("option");
                opt.text = key;
                selArr[0].add(opt);

                //clear select 1 and select2
                for(var i=1;i<selArr.length;i++){
                    clearSelect(selArr[i]);
                }

                //update select1
                var txt=selArr[0][selArr[0].selectedIndex].value;
                var val=arr[txt];
                for(var key in val){
                    var opt=document.createElement("option");
                    opt.text=key;
                    selArr[1].add(opt);
                }


                //update select2
                var txt=selArr[1][selArr[1].selectedIndex].value;
                var val=arr[selArr[0][selArr[0].selectedIndex].value][txt];
                for(var i=0;i<val.length;i++){
                    var opt=document.createElement("option");
                    opt.text=val[i];
                    selArr[2].add(opt);
                }

            }


            selArr[0].onchange=function()
            {
                console.log("sel0 change");


                //clear select 1 and select2
                for(var i=1;i<selArr.length;i++){
                    clearSelect(selArr[i]);
                }

                //update select1
                var txt=selArr[0][selArr[0].selectedIndex].value;
                var val=arr[txt];
                for(var key in val){
                    var opt=document.createElement("option");
                    opt.text=key;
                    selArr[1].add(opt);
                }


                //update select2
                var txt=selArr[1][selArr[1].selectedIndex].value;
                var val=arr[selArr[0][selArr[0].selectedIndex].value][txt];
                for(var i=0;i<val.length;i++){
                    var opt=document.createElement("option");
                    opt.text=val[i];
                    selArr[2].add(opt);
                }

            };

            selArr[1].onchange=function()
            {
                console.log("sel1 change");

                //clear select2
                for(var i=2;i<selArr.length;i++){
                    clearSelect(selArr[i]);
                }

                //update select2
                var text=selArr[1][selArr[1].selectedIndex].value;
                var val=arr[selArr[0][selArr[0].selectedIndex].value][text];
                for(var i=0;i<val.length;i++){
                    var opt=document.createElement("option");
                    opt.text=val[i];
                    selArr[2].add(opt);
                }


            }

        }

    </script>
</head>
<body>

</body>
</html>